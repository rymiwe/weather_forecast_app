<div class="max-w-4xl mx-auto p-6">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold">Detailed Forecast</h1>
    <%= link_to "Back to Search", forecasts_path, class: "px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-md transition-colors" %>
  </div>
  
  <div class="bg-white shadow-md rounded-lg overflow-hidden">
    <!-- Location and timestamp info -->
    <div class="p-6 border-b">
      <div class="flex justify-between items-start">
        <div>
          <h2 class="text-2xl font-bold"><%= @forecast.address %></h2>
          <p class="text-gray-500">
            <%= @forecast.queried_at.strftime("%A, %B %d, %Y at %I:%M %p") %>
          </p>
          <% if @forecast.zip_code.present? %>
            <p class="text-gray-500">ZIP Code: <%= @forecast.zip_code %></p>
          <% end %>
        </div>
        <% if @forecast.cached? %>
          <div class="inline-block px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full">
            Cached Result
          </div>
        <% end %>
      </div>
    </div>
    
    <!-- Current conditions -->
    <div class="p-6 bg-gradient-to-r from-blue-500 to-blue-600 text-white">
      <div class="flex justify-between items-center">
        <div>
          <p class="text-xl opacity-90"><%= @forecast.conditions.titleize %></p>
          <h3 class="text-5xl font-bold mt-1"><%= @forecast.current_temp.round %>°F</h3>
        </div>
        <div class="text-right">
          <div class="flex items-center justify-end gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
            </svg>
            <span class="text-xl"><%= @forecast.high_temp.round %>°</span>
          </div>
          <div class="flex items-center justify-end gap-1 mt-1">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            <span class="text-xl"><%= @forecast.low_temp.round %>°</span>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Extended forecast -->
    <% if @forecast.extended_forecast.present? %>
      <div class="p-6">
        <h4 class="text-lg font-semibold mb-4">5-Day Forecast</h4>
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
              <tr>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Day</th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">High / Low</th>
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Conditions</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
              <% @forecast.extended_forecast_data.each do |day| %>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                    <%= day['day_name'] %>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <%= day['date'] %>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm">
                    <span class="font-medium text-red-600"><%= day['high'].round %>°</span> / 
                    <span class="font-medium text-blue-600"><%= day['low'].round %>°</span>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <%= day['conditions'].join(', ') %>
                  </td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    <% end %>
    
    <!-- Technical info -->
    <div class="p-6 bg-gray-50 border-t">
      <h4 class="text-lg font-semibold mb-4">Technical Information</h4>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <h5 class="text-sm font-medium text-gray-500">FORECAST ID</h5>
          <p class="mt-1"><%= @forecast.id %></p>
        </div>
        <div>
          <h5 class="text-sm font-medium text-gray-500">QUERIED AT</h5>
          <p class="mt-1"><%= @forecast.queried_at %></p>
        </div>
        <div>
          <h5 class="text-sm font-medium text-gray-500">CACHE STATUS</h5>
          <p class="mt-1"><%= @forecast.cached? ? "From Cache" : "Fresh Data" %></p>
        </div>
        <div>
          <h5 class="text-sm font-medium text-gray-500">CACHE EXPIRES</h5>
          <p class="mt-1"><%= @forecast.cache_expires_at.strftime("%I:%M %p") %></p>
        </div>
      </div>
    </div>
  </div>
</div>
